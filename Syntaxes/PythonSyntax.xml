<?xml version="1.0" encoding="UTF-8"?>
<syntax name="sourcecode.python">
	<zones>

    <!-- SUPPORT -->
    <zone name="support.module">
        <starts-with>
        <expression>(from)\s([a-zA-Z][a-zA-Z0-9_\.]+)\s</expression>
            <capture number="1" name="keyword.module.from"/>
            <capture number="2" name="variable.module.name"/>
        </starts-with>
        <ends-with>
            <expression>(import)\s(\*|[a-zA-Z][a-zA-Z0-9_\, ]+)$</expression>
            <capture number="1" name="keyword.module.import"/>
            <capture number="2" name="variable.module.name"/>
        </ends-with>
    </zone>
    <zone name="support.module">
        <expression>(import)\s(\*|[a-zA-Z][a-zA-Z0-9_\, ]+)$</expression>
            <capture number="1" name="keyword.module.import"/>
            <capture number="2" name="variable.module.name"/>
    </zone>
		<zone name="keyword.type.object">
			<expression>\b(object)\b</expression>
		</zone>

		<zone name="keyword.type.property">
			<expression>\b(property)\b</expression>
		</zone>

    <!-- FUNCTION -->
		<zone name="support.function">
			<expression>(class)\s+([a-zA-Z_$]\w*)?\s*(\({0,1})(.*?)(\){0,1}):</expression>
			<capture number="1" name="keyword.type.class"/>
			<capture number="2" name="support.function.name"/>
			<capture number="3" name="punctuation.definition.parenthesis.open"/>
			<capture number="4" name="variable.function.parameter"/>
			<capture number="5" name="punctuation.definition.parenthesis.close"/>
		</zone>

		<zone name="support.function">
			<expression>(def)\s+([a-zA-Z_$]\w*)?\s*(\()(.*?)(\)):</expression>
			<capture number="1" name="keyword.type.function"/>
			<capture number="2" name="support.function.name"/>
			<capture number="3" name="punctuation.definition.parenthesis.open"/>
			<capture number="4" name="variable.function.parameter"/>
			<capture number="5" name="punctuation.definition.parenthesis.close"/>
		</zone>

    <!-- COMMENT -->
		<zone name="comment">
		    <starts-with>
				<expression>#</expression>
				<capture number="0" name="punctuation.comment.line.begin"/>
			</starts-with>
			<ends-with>
    			<expression>.*$\n?</expression>
    			<capture number="0" name="comment.text"/>
    		</ends-with>
		</zone>

    <!-- KEYWORD -->
		<zone name="keyword.flow-control">
			<expression>\b(break|except|continue|elif|else|finally|for|if|import|from|return|switch|raise|try|while)\b</expression>
		</zone>
		<zone name="keyword.operator">
			<expression>\b(del|in|is|and|or|with)\b</expression>
		</zone>
		<zone name="keyword.operator">
			<expression>!|\$|%|&amp;|\*|\-\-|\-|\+\+|\+|~|===|==|=|!=|!==|&lt;=|>=|&lt;&lt;=|>>=|>>>=|&lt;>|&lt;|>|!|&amp;&amp;|\|\||\?\:|\*=|/=|%=|\+=|\-=|&amp;=|\^=|\b(in|type|is|del|and|or)\b</expression>
		</zone>

    <!-- CONSTANT -->
		<zone name="constant.language.boolean.true">
			<expression>\bTrue\b</expression>
		</zone>
		<zone name="constant.language.boolean.false">
			<expression>\bFalse\b</expression>
		</zone>
		<zone name="constant.language.null">
			<expression>\bNone\b</expression>
		</zone>
		<zone name="constant.language">
			<expression>\b(Exception)\b</expression>
		</zone>
		<zone name="constant.numeric">
			<expression>\b((0(x|X)[0-9a-fA-F]+)|([0-9]+(\.[0-9]+)?))\b</expression>
		</zone>
	
    <!-- VARIABLE -->
		<zone name="variable.language">
			<expression>\b(super|self)</expression>
		</zone>

		<!-- STRING -->
		<zone name="string.regex">
			<starts-with>
				<expression>(r)(['|"])</expression>
				<capture number="1" name="punctuation.definition.string.modifier"/>
				<capture number="2" name="punctuation.definition.string.regex.begin"/>
			</starts-with>
			<ends-with>
				<expression>'|"</expression>
				<capture number="0" name="punctuation.definition.string.regex.end"/>
			</ends-with>
      <subzones>
        <include syntax="expression.regex" />
      </subzones>
		</zone>
		<zone name="string.quoted.single">
			<starts-with>
				<expression>(u{0,1})(')</expression>
				<capture number="1" name="punctuation.definition.string.modifier"/>
				<capture number="2" name="punctuation.definition.string.begin"/>
			</starts-with>
			<ends-with>
				<expression>'</expression>
				<capture number="0" name="punctuation.definition.string.end"/>
			</ends-with>
			<subzones>
				<zone name="constant.character.escape">
					<expression>%s|\\(x\h{2}|[0-2][0-7]{,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)</expression>
				</zone>
			</subzones>
		</zone>
		<zone name="string.quoted.single">
			<starts-with>
				<expression>(u{0,1})(''')</expression>
				<capture number="1" name="punctuation.definition.string.modifier"/>
				<capture number="2" name="punctuation.definition.string.begin"/>
			</starts-with>
			<ends-with>
				<expression>'''</expression>
				<capture number="0" name="punctuation.definition.string.end"/>
			</ends-with>
			<subzones>
				<zone name="constant.character.escape">
					<expression>%s|\\(x\h{2}|[0-2][0-7]{,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)</expression>
				</zone>
			</subzones>
		</zone>
		<zone name="string.quoted.double">
			<starts-with>
				<expression>(u{0,1})(")</expression>
				<capture number="1" name="punctuation.definition.string.modifier"/>
				<capture number="2" name="punctuation.definition.string.begin"/>
			</starts-with>
			<ends-with>
				<expression>"</expression>
				<capture number="0" name="punctuation.definition.string.end"/>
			</ends-with>
			<subzones>
				<zone name="constant.character.escape">
					<expression>%s|\\(x\h{2}|[0-2][0-7]{,2}|3[0-6][0-7]|37[0-7]?|[4-7][0-7]?|.)</expression>
				</zone>
			</subzones>
		</zone>
		<zone name="string.quoted.double">
			<starts-with>
				<expression>(u{0,1})(""")</expression>
				<capture number="1" name="punctuation.definition.string.modifier"/>
				<capture number="2" name="punctuation.definition.string.begin"/>
			</starts-with>
			<ends-with>
				<expression>"""</expression>
				<capture number="0" name="punctuation.definition.string.end"/>
			</ends-with>
			<subzones>
				<zone name="constant.character.escape">
					<expression>%s|\\(x\h{2}|[0-2][0-7]{,2}|3[0-6][0-7]|37[0-7]?|[4-7][0-7]?|.)</expression>
				</zone>
			</subzones>
		</zone>

		<!-- PUNCTUATION -->
		<zone name="punctuation.terminator.statement">
			<expression>\;</expression>
		</zone>

		<!-- META -->
		<zone name="meta.delimiter.object.comma">
			<expression>,[ |\t]*</expression>
		</zone>
		<zone name="meta.delimiter.method.period">
			<expression>\.</expression>
		</zone>
		<zone name="meta.brace.curly.open">
			<expression>\{</expression>
		</zone>
		<zone name="meta.brace.curly.close">
			<expression>\}</expression>
		</zone>
		<zone name="meta.brace.round">
			<expression>\(|\)</expression>
		</zone>
		<zone name="meta.brace.square">
			<expression>\[|\]</expression>
		</zone>

	</zones>
</syntax>
